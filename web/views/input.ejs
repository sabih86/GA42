<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LLMReport Input</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; }
    label { display: block; margin-bottom: 1rem; }
    input, textarea { width: 100%; padding: .5rem; margin-top: .5rem; }
    button { padding: .5rem 1rem; font-size: 1rem; }
  </style>
</head>
<body>
  <h1>LLMReport Input</h1>
  <form action="/input" method="POST">
    <label>Keywords (comma-separated):
      <textarea name="keywords" rows="3" required></textarea>
    </label>
    <label>Brand Name:
      <input type="text" name="brand" required />
    </label>
    <label>Brand URL:
      <input type="url" name="brandUrl" required />
    </label>
	<label>Location (e.g., Canada or Toronto) — required:
      <input type="text" name="location" required />
    </label>
        <h2>Competitors</h2>
    <div id="competitors" style="margin-bottom:1rem;">
      <div class="competitor-row" data-index="0" style="margin-bottom: .75rem; border: 1px solid #eee; padding: .75rem; border-radius: .5rem;">
        <label style="margin-bottom: .5rem;">
          Competitor name
          <input type="text" name="competitors[0][name]" required />
        </label>
        <label>
          Competitor URL
          <input type="url" name="competitors[0][url]" required />
        </label>
      </div>
    </div>
    <button type="button" id="addCompetitor" aria-label="Add another competitor" style="margin-bottom:1rem;">+ Add competitor</button>
    <button type="submit">Next</button>
  </form>
  <script>
    (function () {
      const container = document.getElementById('competitors');
      const addBtn = document.getElementById('addCompetitor');
      let idx = 1;

      addBtn.addEventListener('click', () => {
        const row = document.createElement('div');
        row.className = 'competitor-row';
        row.dataset.index = String(idx);
        row.style.marginBottom = '.75rem';
        row.style.border = '1px solid #eee';
        row.style.padding = '.75rem';
        row.style.borderRadius = '.5rem';

        row.innerHTML = `
          <div style="display:flex; gap:1rem; align-items:flex-end; flex-wrap:wrap;">
            <label style="flex:1; min-width:240px;">
              Competitor name
              <input type="text" name="competitors[${idx}][name]" required />
            </label>
            <label style="flex:1; min-width:280px;">
              Competitor URL
              <input type="url" name="competitors[${idx}][url]" required />
            </label>
            <button type="button" class="remove-competitor" title="Remove this competitor" aria-label="Remove competitor" style="height:2.5rem;">× Remove</button>
          </div>
        `;

        row.querySelector('.remove-competitor').addEventListener('click', () => {
          container.removeChild(row);
        });

        container.appendChild(row);
        idx++;
      });
    })();
  </script>
</body>
</html>
